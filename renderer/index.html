<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'" />
  <title data-i18n="app.title">WSL Cleaner</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Custom title bar -->
  <header id="titlebar">
    <div class="titlebar-drag">
      <div class="titlebar-menu-wrap">
        <button id="btn-app-menu" class="titlebar-menu-btn" aria-label="Menu" data-i18n-aria="menu.title">
          <svg class="titlebar-icon" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 6h18M3 12h18M3 18h18"/>
          </svg>
        </button>
        <div id="app-menu-dropdown" class="app-menu-dropdown hidden">
          <button class="app-menu-item" id="menu-reload">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
            </svg>
            <span data-i18n="menu.reload">Reload Window</span>
          </button>
          <button class="app-menu-item" id="menu-toggle-fullscreen">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15,3 21,3 21,9"/><polyline points="9,21 3,21 3,15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/>
            </svg>
            <span data-i18n="menu.fullscreen">Toggle Fullscreen</span>
          </button>
          <div class="app-menu-separator"></div>
          <button class="app-menu-item" id="menu-about">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <span data-i18n="menu.about">About</span>
          </button>
          <div class="app-menu-separator"></div>
          <button class="app-menu-item app-menu-item-danger" id="menu-exit">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16,17 21,12 16,7"/><line x1="21" y1="12" x2="9" y2="12"/>
            </svg>
            <span data-i18n="menu.exit">Exit</span>
          </button>
        </div>
      </div>
      <span class="titlebar-title" data-i18n="app.title">WSL Cleaner</span>
    </div>
    <div class="titlebar-controls">
      <button id="btn-minimize" class="titlebar-btn" aria-label="Minimize" data-i18n-aria="titlebar.minimize">
        <svg width="12" height="12" viewBox="0 0 12 12"><rect y="5" width="12" height="2" fill="currentColor"/></svg>
      </button>
      <button id="btn-maximize" class="titlebar-btn" aria-label="Maximize" data-i18n-aria="titlebar.maximize">
        <svg width="12" height="12" viewBox="0 0 12 12"><rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
      </button>
      <button id="btn-close" class="titlebar-btn btn-close" aria-label="Close" data-i18n-aria="titlebar.close">
        <svg width="12" height="12" viewBox="0 0 12 12"><path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1.5"/></svg>
      </button>
    </div>
  </header>

  <main id="app">
    <!-- Error screen (shown if WSL not found) -->
    <section id="error-screen" class="screen hidden">
      <div class="error-card">
        <svg class="error-icon" viewBox="0 0 24 24" width="64" height="64" fill="none" stroke="#ff4757" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"/>
          <line x1="15" y1="9" x2="9" y2="15"/>
          <line x1="9" y1="9" x2="15" y2="15"/>
        </svg>
        <h2 data-i18n="error.notDetected">WSL 2 Not Detected</h2>
        <p id="error-message" data-i18n="error.notInstalled">WSL 2 is not installed or no distribution was found.</p>
        <a href="https://learn.microsoft.com/en-us/windows/wsl/install" class="link" target="_blank" data-i18n="error.installLink">Learn how to install WSL 2</a>
      </div>
    </section>

    <!-- Splash + Loading screen -->
    <section id="loading-screen" class="screen">
      <!-- Phase 1: Splash -->
      <div id="splash" class="splash">
        <div class="splash-glow"></div>
        <div class="splash-particles">
          <div></div><div></div><div></div><div></div>
          <div></div><div></div><div></div><div></div>
          <div></div><div></div><div></div><div></div>
        </div>
        <svg class="splash-logo" viewBox="0 0 64 64" width="80" height="80" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <!-- Terminal window frame -->
          <rect x="6" y="8" width="52" height="44" rx="6" stroke="var(--accent)" stroke-width="2"/>
          <!-- Title bar dots -->
          <circle cx="16" cy="17" r="2" stroke="var(--accent)" stroke-width="1.5"/>
          <circle cx="24" cy="17" r="2" stroke="var(--accent)" stroke-width="1.5"/>
          <circle cx="32" cy="17" r="2" stroke="var(--accent)" stroke-width="1.5"/>
          <!-- Prompt lines -->
          <path d="M16 28l6 4-6 4" stroke="var(--accent)" stroke-width="2"/>
          <line x1="28" y1="36" x2="44" y2="36" stroke="var(--accent)" stroke-width="2"/>
          <!-- Sparkle / clean star -->
          <path d="M46 24l1.5 3 3 1.5-3 1.5-1.5 3-1.5-3-3-1.5 3-1.5z" stroke="var(--accent)" stroke-width="1.5"/>
        </svg>
        <h1 class="splash-title">WSL Cleaner</h1>
        <p class="splash-tagline">
          <span>Clean.</span>
          <span>Optimize.</span>
          <span>Compact.</span>
        </p>
        <div id="splash-detecting" class="splash-detecting hidden">
          <div class="splash-detect-spinner"></div>
          <span class="splash-detect-text" data-i18n="status.detecting">Detecting WSL 2<span class="detecting-dots"></span></span>
        </div>
      </div>
    </section>

    <!-- Main app screen -->
    <section id="main-screen" class="screen hidden">
      <!-- Status bar -->
      <div id="status-bar">
        <span class="status-dot"></span>
        <span id="status-text" data-i18n="status.ready">WSL 2 Ready</span>
        <div id="distro-picker" class="distro-picker">
          <button id="distro-picker-btn" class="badge distro-picker-btn">
            <span id="distro-picker-label">No distro</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
              <polyline points="6,9 12,15 18,9"/>
            </svg>
          </button>
          <div id="distro-dropdown" class="distro-dropdown hidden">
            <!-- checkboxes injected by JS -->
          </div>
        </div>
      </div>

      <!-- Sidebar + content layout -->
      <div id="main-layout">
        <nav id="sidebar">
          <div class="nav-section-label" data-i18n="nav.section.cleaning">Cleaning</div>
          <a class="nav-item active" data-page="cleaner">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="13,2 3,14 12,14 11,22 21,10 12,10"/>
            </svg>
            <span data-i18n="nav.cleaner">Cleaner</span>
          </a>
          <a class="nav-item" data-page="settings">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
            <span data-i18n="nav.settings">Settings</span>
          </a>
          <a class="nav-item" data-page="stats">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
            <span data-i18n="nav.stats">Stats</span>
          </a>
          <div class="nav-section-label" data-i18n="nav.section.tools">Tools</div>
          <a class="nav-item" data-page="diskmap">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="4"/><rect x="14" y="10" width="7" height="3"/><rect x="3" y="13" width="7" height="8"/><rect x="14" y="16" width="7" height="5"/>
            </svg>
            <span data-i18n="nav.diskmap">Disk Map</span>
          </a>
          <a class="nav-item" data-page="health">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
            </svg>
            <span data-i18n="nav.health">Health</span>
          </a>
          <a class="nav-item" data-page="distros">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><circle cx="6" cy="6" r="1"/><circle cx="6" cy="18" r="1"/>
            </svg>
            <span data-i18n="nav.distros">Distros</span>
          </a>
          <a class="nav-item" data-page="performance">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="14" r="9"/><path d="M12 5v4"/><path d="M16.24 8.76l-2.12 2.12"/><circle cx="12" cy="14" r="1.5"/>
            </svg>
            <span data-i18n="nav.performance">Performance</span>
          </a>
          <div class="nav-section-label" data-i18n="nav.section.wslSettings">WSL Settings</div>
          <a class="nav-item" data-page="config">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/><line x1="1" y1="14" x2="7" y2="14"/><line x1="9" y1="8" x2="15" y2="8"/><line x1="17" y1="16" x2="23" y2="16"/>
            </svg>
            <span data-i18n="nav.config">WSL Config</span>
          </a>
          <a class="nav-item" data-page="startup">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" y1="2" x2="12" y2="12"/>
            </svg>
            <span data-i18n="nav.startup">Startup</span>
          </a>
          <a class="nav-item" data-page="tray">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
            </svg>
            <span data-i18n="nav.tray">Tray &amp; Alerts</span>
          </a>
          <div class="nav-spacer"></div>
          <a class="nav-item" data-page="about">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <span data-i18n="nav.about">About</span>
          </a>
        </nav>

        <div id="page-container">
          <!-- ════ Cleaner Page ════ -->
          <div id="page-cleaner" class="page">
            <div class="simple-center">
              <div class="simple-hero">
                <img src="../assets/icon.png" class="cleaner-logo" alt="" width="80" height="80" draggable="false">
                <h2 class="simple-title" data-i18n="simple.diskSize">WSL Disk Size</h2>
                <div id="simple-size" class="simple-size-value">--</div>
                <p class="simple-desc" data-i18n="simple.desc">Clean your WSL instance and compact the virtual disk to reclaim space.</p>
              </div>

              <div id="simple-estimate" class="simple-estimate hidden">
                <button id="btn-simple-estimate" class="btn-outline btn-estimate btn-sm">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                  </svg>
                  <span data-i18n="simple.estimateBtn">Estimate Reclaimable Space</span>
                </button>
                <div id="simple-estimate-result" class="simple-estimate-result hidden">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17,8 12,3 7,8"/><line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                  <span><span data-i18n="simple.estimateLabel">Estimated reclaimable:</span> <strong id="simple-estimate-total">--</strong></span>
                </div>
              </div>

              <button id="btn-simple-go" class="btn-primary btn-simple-go">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5,3 19,12 5,21"/></svg>
                <span id="btn-simple-go-label" data-i18n-html="simple.cleanCompact">Clean &amp; Compact</span>
              </button>

              <!-- Disclaimer -->
              <div class="simple-disclaimer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                <span data-i18n-html="simple.disclaimer">This deletes files &amp; old dependency directories. Use <strong>Settings</strong> to see exactly what will be cleaned and control each task. Designed for WSL partitions used for development.</span>
              </div>

              <!-- Step progress list -->
              <div id="simple-steps" class="simple-steps hidden">
                <div class="progress-header">
                  <div class="orbital-spinner orbital-spinner-sm">
                    <div class="orbit orbit-1"></div>
                    <div class="orbit orbit-2"></div>
                    <div class="orbit orbit-3"></div>
                    <div class="orbit-core"></div>
                  </div>
                  <div class="progress-bar-track">
                    <div id="simple-progress-fill" class="progress-bar-fill" style="width:0%"></div>
                  </div>
                  <div class="progress-info">
                    <span id="simple-step-counter"></span>
                    <span id="simple-elapsed">0:00</span>
                  </div>
                </div>
                <div class="step-item" data-step="stale">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n-html="simple.step.stale">Scanning &amp; removing stale directories...</span>
                </div>
                <div class="step-item" data-step="cleanup">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.cleanup">Running cleanup tasks...</span>
                  <span class="step-sub" id="cleanup-step-sub"></span>
                </div>
                <div class="step-item" data-step="fstrim">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.fstrim">Running filesystem TRIM...</span>
                </div>
                <div class="step-item" data-step="shutdown">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.shutdown">Shutting down WSL...</span>
                </div>
                <div class="step-item" data-step="update">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.update">Updating WSL...</span>
                </div>
                <div class="step-item" data-step="compact">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.compact">Compacting virtual disk...</span>
                </div>
                <div class="step-item" data-step="restart">
                  <div class="step-icon-slot"></div>
                  <span class="step-label" data-i18n="simple.step.restart">Restarting WSL...</span>
                </div>
              </div>

              <!-- Live output log -->
              <div id="cleaner-log-section" class="cleaner-log-section hidden">
                <div class="cleaner-log-header">
                  <span data-i18n="simple.logTitle">Live Output</span>
                  <button id="cleaner-log-toggle" class="btn-icon-sm" type="button" title="Toggle log">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6,9 12,15 18,9"/></svg>
                  </button>
                </div>
                <pre id="cleaner-log" class="cleaner-log"></pre>
              </div>

              <!-- Completion view (replaces everything when done) -->
              <div id="simple-result" class="simple-result-view hidden">
                <div class="result-success-icon">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                  </svg>
                </div>
                <h2 class="result-title" data-i18n="result.complete">Cleanup Complete</h2>

                <div class="size-comparison">
                  <div class="size-box">
                    <span class="size-label" data-i18n="result.before">Before</span>
                    <span id="simple-size-before" class="size-value">--</span>
                  </div>
                  <svg class="arrow-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"/><polyline points="12,5 19,12 12,19"/>
                  </svg>
                  <div class="size-box">
                    <span class="size-label" data-i18n="result.after">After</span>
                    <span id="simple-size-after" class="size-value">--</span>
                  </div>
                </div>

                <div class="result-saved">
                  <span id="simple-space-saved" class="result-saved-value">--</span>
                  <span class="result-saved-label" data-i18n="result.spaceSaved">Space Saved</span>
                  <span id="result-compact-hint" class="result-compact-hint hidden">Disk compaction was disabled — enable it in Settings to reclaim disk space</span>
                </div>

                <div class="result-stats">
                  <div class="result-stat">
                    <span id="result-tasks-run" class="result-stat-value">0</span>
                    <span class="result-stat-label">Tasks Run</span>
                  </div>
                  <div class="result-stat">
                    <span id="result-tasks-ok" class="result-stat-value result-stat-success">0</span>
                    <span class="result-stat-label">Succeeded</span>
                  </div>
                  <div id="result-fail-box" class="result-stat" role="button" tabindex="0" title="Click to view details">
                    <span id="result-tasks-fail" class="result-stat-value result-stat-fail">0</span>
                    <span class="result-stat-label">Failed</span>
                  </div>
                  <div class="result-stat">
                    <span id="result-stale-found" class="result-stat-value">0</span>
                    <span class="result-stat-label">Stale Found</span>
                  </div>
                  <div class="result-stat">
                    <span id="result-stale-deleted" class="result-stat-value">0</span>
                    <span class="result-stat-label">Stale Deleted</span>
                  </div>
                  <div class="result-stat">
                    <span id="result-duration" class="result-stat-value">0:00</span>
                    <span class="result-stat-label">Duration</span>
                  </div>
                </div>

                <!-- Per-task space savings breakdown -->
                <div id="result-breakdown" class="chart-card result-breakdown hidden">
                  <div class="chart-header" data-i18n="result.breakdownTitle">Space Freed by Task</div>
                  <div class="chart-body result-breakdown-body">
                    <canvas id="chart-task-breakdown"></canvas>
                  </div>
                  <div id="result-breakdown-empty" class="chart-empty hidden" data-i18n="result.breakdownEmpty">No individual task freed measurable space.</div>
                </div>

                <button id="btn-clean-again" class="btn-primary btn-simple-go">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                  </svg>
                  <span>Clean Again</span>
                </button>
              </div>
            </div>
          </div>

          <!-- ════ Settings Page ════ -->
          <div id="page-settings" class="page hidden">
            <!-- Cleanup tasks -->
            <h2 class="section-title" data-i18n="settings.tasksTitle">Cleanup Tasks</h2>
            <p class="section-desc" data-i18n="settings.tasksDesc">Choose which cleanup tasks the Cleaner will run. Your selections are saved automatically.</p>

            <!-- Search & filters -->
            <div class="task-filters">
              <div class="task-search-wrap">
                <svg class="task-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                </svg>
                <input type="text" id="task-search" class="task-search"
                       data-i18n-placeholder="settings.searchPlaceholder"
                       placeholder="Search tasks..." autocomplete="off" />
              </div>
            </div>

            <div id="task-cards"></div>

            <!-- Stale Directories -->
            <h2 class="section-title" style="margin-top: 32px;" data-i18n="stale.title">Stale Directories</h2>
            <p class="section-desc" data-i18n-html="stale.desc">Find and remove old dependency, build, and cache directories (<code>node_modules</code>, <code>vendor</code>, <code>__pycache__</code>, <code>.next</code>, <code>.nuxt</code>, <code>.turbo</code>, <code>.yarn</code>, <code>target</code>, <code>.gradle</code>, <code>dist</code>, <code>.venv</code>, and more) that haven't been modified recently. These are safe to delete &mdash; they'll be recreated automatically when you next build or install.</p>

            <div class="stale-controls">
              <div class="stale-toggle-row">
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="stale-enabled-cb" checked />
                  <span class="toggle-slider"></span>
                </label>
                <span class="stale-toggle-label" data-i18n="stale.enableToggle">Enable stale directory cleanup</span>
              </div>
              <div class="stale-days-row">
                <label for="stale-days-input" data-i18n="stale.daysLabel">Remove directories not modified in the last</label>
                <input type="number" id="stale-days-input" class="stale-days-input" value="30" min="1" max="365" />
                <span data-i18n="stale.daysUnit">days</span>
              </div>
            </div>

            <!-- Disk Compaction -->
            <h2 class="section-title" style="margin-top: 32px;" data-i18n="settings.compactTitle">Disk Compaction</h2>
            <p class="section-desc" data-i18n="settings.compactDesc">When enabled, the Cleaner will shut down WSL, update it, and compact the virtual disk after running cleanup tasks.</p>

            <div class="stale-controls">
              <div class="stale-toggle-row">
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="compact-enabled-cb" checked />
                  <span class="toggle-slider"></span>
                </label>
                <span class="stale-toggle-label" data-i18n="settings.compactToggle">Compact disk after cleaning</span>
              </div>
            </div>

            <div id="vhdx-info" class="card">
              <div class="card-body">
                <div class="vhdx-details">
                  <div class="vhdx-row">
                    <span class="label" data-i18n="compact.vdisk">Virtual Disk</span>
                    <span id="vhdx-path" class="value mono" data-i18n="compact.searching">Searching...</span>
                  </div>
                  <div class="vhdx-row">
                    <span class="label" data-i18n="compact.currentSize">Current Size</span>
                    <span id="vhdx-size" class="value mono">--</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ════ Stats Page ════ -->
          <div id="page-stats" class="page hidden">
            <h2 class="section-title" data-i18n="stats.title">Cleanup Stats</h2>
            <p class="section-desc" data-i18n="stats.desc">Track your cleanup history and see how much space you've recovered over time.</p>

            <!-- Summary stat cards -->
            <div class="stats-grid">
              <div class="stat-card">
                <div class="stat-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17,8 12,3 7,8"/><line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                </div>
                <div class="stat-value" id="stat-total-saved">--</div>
                <div class="stat-label" data-i18n="stats.totalSaved">Total Space Saved</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                  </svg>
                </div>
                <div class="stat-value" id="stat-total-cleanups">0</div>
                <div class="stat-label" data-i18n="stats.cleanups">Cleanups Performed</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="20" x2="12" y2="10"/><polyline points="18,20 18,4 6,20 6,14"/>
                  </svg>
                </div>
                <div class="stat-value" id="stat-avg-saved">--</div>
                <div class="stat-label" data-i18n="stats.avgSaved">Avg Space Saved</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
                  </svg>
                </div>
                <div class="stat-value" id="stat-last-cleanup" data-i18n="stats.never">Never</div>
                <div class="stat-label" data-i18n="stats.lastCleanup">Last Cleanup</div>
              </div>
              <div class="stat-card">
                <div class="stat-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/><path d="M12 6v6l4 2"/>
                  </svg>
                </div>
                <div class="stat-value" id="stat-streak">--</div>
                <div class="stat-label" data-i18n="stats.streak">Cleanup Streak</div>
              </div>
            </div>

            <!-- Charts -->
            <div class="chart-card">
              <div class="chart-header" data-i18n="stats.diskChart">Disk Size Over Time</div>
              <div class="chart-body">
                <canvas id="chart-disk-size"></canvas>
              </div>
              <div id="chart-disk-empty" class="chart-empty hidden" data-i18n="stats.diskEmpty">No compaction data yet. Run a cleanup to start tracking.</div>
            </div>

            <div class="chart-card">
              <div class="chart-header" data-i18n="stats.savedChart">Space Saved Per Session</div>
              <div class="chart-body">
                <canvas id="chart-space-saved"></canvas>
              </div>
              <div id="chart-saved-empty" class="chart-empty hidden" data-i18n="stats.savedEmpty">No sessions with space savings yet.</div>
            </div>

            <!-- History list -->
            <div class="history-section">
              <div class="history-header">
                <h3 data-i18n="stats.history">Cleanup History</h3>
                <button id="btn-clear-history" class="btn-small" data-i18n="stats.clearHistory">Clear History</button>
              </div>
              <div id="history-list" class="history-list">
                <div class="stats-empty" id="history-empty">
                  <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/>
                  </svg>
                  <p data-i18n="stats.historyEmpty">No cleanup history yet. Run a cleanup to start tracking your stats.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- ════ Disk Map Page ════ -->
          <div id="page-diskmap" class="page hidden">
            <div class="diskmap-toolbar">
              <div class="diskmap-toolbar-left">
                <label class="diskmap-label" data-i18n="diskmap.distro">Distro</label>
                <select id="diskmap-distro" class="diskmap-select"></select>
                <label class="diskmap-label" data-i18n="diskmap.depth">Depth</label>
                <select id="diskmap-depth" class="diskmap-select">
                  <option value="2">2</option>
                  <option value="3" selected>3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </div>
              <div class="diskmap-toolbar-right">
                <button id="btn-diskmap-scan" class="btn-primary btn-diskmap-scan">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                  </svg>
                  <span data-i18n="diskmap.scan">Scan</span>
                </button>
                <button id="btn-diskmap-cancel" class="btn-outline btn-diskmap-cancel hidden">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
                  </svg>
                  <span data-i18n="diskmap.cancel">Cancel</span>
                </button>
              </div>
            </div>
            <div id="diskmap-breadcrumb" class="diskmap-breadcrumb hidden"></div>
            <div id="diskmap-status" class="diskmap-status hidden"></div>
            <div id="diskmap-treemap" class="diskmap-treemap"></div>
            <div id="diskmap-empty" class="diskmap-empty">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="4"/><rect x="14" y="10" width="7" height="3"/><rect x="3" y="13" width="7" height="8"/><rect x="14" y="16" width="7" height="5"/>
              </svg>
              <p data-i18n="diskmap.empty">Select a distro and click Scan to visualize disk usage.</p>
            </div>
            <div id="diskmap-scanning" class="diskmap-scanning hidden">
              <div class="spinner"></div>
              <p data-i18n="diskmap.scanning">Scanning filesystem...</p>
              <p class="diskmap-scanning-sub" data-i18n="diskmap.scanningDesc">Running du inside WSL. This may take a moment for large filesystems.</p>
            </div>
          </div>

          <!-- ════ Health Page ════ -->
          <div id="page-health" class="page hidden">
            <div class="health-toolbar">
              <div class="health-toolbar-left">
                <label class="health-label" data-i18n="health.distro">Distro</label>
                <select id="health-distro" class="health-select"></select>
              </div>
              <div class="health-toolbar-right">
                <button id="btn-health-refresh" class="btn-outline btn-health-refresh">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                  </svg>
                  <span data-i18n="health.refresh">Refresh</span>
                </button>
              </div>
            </div>

            <!-- Summary cards -->
            <div id="health-content" class="hidden">
              <!-- Distro OS info banner -->
              <div id="health-os-banner" class="health-info-banner">
                <span id="health-os-name" class="health-os-name">--</span>
              </div>

              <div class="health-grid">
                <div class="health-card">
                  <div class="health-card-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="4" y="4" width="16" height="16" rx="2"/><line x1="4" y1="12" x2="20" y2="12"/><line x1="12" y1="4" x2="12" y2="20"/>
                    </svg>
                  </div>
                  <div class="health-card-value" id="health-kernel">--</div>
                  <div class="health-card-label" data-i18n="health.kernel">Kernel</div>
                </div>
                <div class="health-card">
                  <div class="health-card-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"/><polyline points="12,6 12,12 16,14"/>
                    </svg>
                  </div>
                  <div class="health-card-value" id="health-uptime">--</div>
                  <div class="health-card-label" data-i18n="health.uptime">Uptime</div>
                </div>
                <div class="health-card">
                  <div class="health-card-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="4" y="4" width="16" height="16" rx="2"/><path d="M9 9h6v6H9z"/>
                    </svg>
                  </div>
                  <div class="health-card-value" id="health-cpu-load">--</div>
                  <div class="health-card-label" data-i18n="health.cpuLoad">CPU Load</div>
                </div>
                <div class="health-card">
                  <div class="health-card-icon">
                    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M22 12H2"/><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"/>
                    </svg>
                  </div>
                  <div class="health-card-value" id="health-mem-summary">--</div>
                  <div class="health-card-label" data-i18n="health.memory">Memory</div>
                </div>
              </div>

              <!-- Memory detail -->
              <div class="health-detail-card">
                <div class="health-detail-header" data-i18n="health.memUsage">Memory Usage</div>
                <div class="health-detail-body">
                  <div class="health-bar-row">
                    <span class="health-bar-label">RAM</span>
                    <div class="health-bar"><div class="health-bar-fill" id="health-ram-bar"></div></div>
                    <span class="health-bar-value" id="health-ram-text">--</span>
                  </div>
                  <div class="health-bar-row">
                    <span class="health-bar-label" data-i18n="health.swap">Swap</span>
                    <div class="health-bar"><div class="health-bar-fill" id="health-swap-bar"></div></div>
                    <span class="health-bar-value" id="health-swap-text">--</span>
                  </div>
                  <div id="health-wslconfig-row" class="health-wslconfig-note hidden">
                    <span id="health-wslconfig-text"></span>
                  </div>
                </div>
              </div>

              <!-- Disk detail -->
              <div class="health-detail-card">
                <div class="health-detail-header" data-i18n="health.disk">Disk Usage</div>
                <div class="health-detail-body">
                  <div class="health-bar-row">
                    <span class="health-bar-label">/</span>
                    <div class="health-bar"><div class="health-bar-fill" id="health-disk-bar"></div></div>
                    <span class="health-bar-value" id="health-disk-text">--</span>
                  </div>
                </div>
              </div>

              <!-- Network -->
              <div class="health-detail-card">
                <div class="health-detail-header" data-i18n="health.network">Network</div>
                <div class="health-detail-body">
                  <table class="health-table" id="health-network-table">
                    <thead>
                      <tr>
                        <th data-i18n="health.iface">Interface</th>
                        <th data-i18n="health.rx">RX</th>
                        <th data-i18n="health.tx">TX</th>
                      </tr>
                    </thead>
                    <tbody id="health-network-body"></tbody>
                  </table>
                  <div id="health-network-empty" class="health-table-empty hidden" data-i18n="health.noNetwork">No network interfaces found.</div>
                </div>
              </div>

              <!-- Quick Status Row: DNS, I/O Pressure, Zombies -->
              <div class="health-status-grid">
                <!-- DNS Status -->
                <div class="health-detail-card">
                  <div class="health-detail-header" data-i18n="health.dns">DNS</div>
                  <div class="health-detail-body">
                    <div class="health-kv-row">
                      <span class="health-kv-label" data-i18n="health.dnsStatus">Status</span>
                      <span class="health-kv-value" id="health-dns-status">--</span>
                    </div>
                    <div class="health-kv-row">
                      <span class="health-kv-label" data-i18n="health.dnsServer">Server</span>
                      <span class="health-kv-value mono" id="health-dns-server">--</span>
                    </div>
                  </div>
                </div>

                <!-- I/O Pressure -->
                <div class="health-detail-card" id="health-io-card">
                  <div class="health-detail-header" data-i18n="health.ioPressure">I/O Pressure</div>
                  <div class="health-detail-body">
                    <div class="health-bar-row">
                      <span class="health-bar-label" data-i18n="health.some">Some</span>
                      <div class="health-bar"><div class="health-bar-fill" id="health-io-some-bar"></div></div>
                      <span class="health-bar-value" id="health-io-some-text">--</span>
                    </div>
                    <div class="health-bar-row">
                      <span class="health-bar-label" data-i18n="health.full">Full</span>
                      <div class="health-bar"><div class="health-bar-fill" id="health-io-full-bar"></div></div>
                      <span class="health-bar-value" id="health-io-full-text">--</span>
                    </div>
                    <div id="health-io-empty" class="health-table-empty hidden" data-i18n="health.noIoPressure">I/O pressure data not available.</div>
                  </div>
                </div>

                <!-- Zombies -->
                <div class="health-detail-card">
                  <div class="health-detail-header">
                    <span data-i18n="health.zombies">Zombie Processes</span>
                    <span class="health-badge" id="health-zombie-badge">0</span>
                  </div>
                  <div class="health-detail-body">
                    <table class="health-table" id="health-zombie-table">
                      <thead>
                        <tr>
                          <th data-i18n="health.pid">PID</th>
                          <th data-i18n="health.user">User</th>
                          <th data-i18n="health.command">Command</th>
                        </tr>
                      </thead>
                      <tbody id="health-zombie-body"></tbody>
                    </table>
                    <div id="health-zombie-empty" class="health-table-empty" data-i18n="health.noZombies">No zombie processes.</div>
                  </div>
                </div>
              </div>

              <!-- Services Row: Docker, Systemd -->
              <div class="health-status-grid health-status-grid-2">
                <!-- Docker -->
                <div class="health-detail-card" id="health-docker-card">
                  <div class="health-detail-header" data-i18n="health.docker">Docker</div>
                  <div class="health-detail-body">
                    <div class="health-kv-row">
                      <span class="health-kv-label" data-i18n="health.dockerRunning">Running</span>
                      <span class="health-kv-value health-badge-inline" id="health-docker-running">0</span>
                    </div>
                    <div class="health-kv-row">
                      <span class="health-kv-label" data-i18n="health.dockerStopped">Stopped</span>
                      <span class="health-kv-value" id="health-docker-stopped">0</span>
                    </div>
                    <div class="health-kv-row">
                      <span class="health-kv-label" data-i18n="health.dockerTotal">Total</span>
                      <span class="health-kv-value" id="health-docker-total">0</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Systemd (full-width) -->
              <div class="health-detail-card" id="health-systemd-card">
                <div class="health-detail-header">
                  <span data-i18n="health.systemd">Systemd</span>
                  <span class="health-badge" id="health-systemd-badge">--</span>
                </div>
                <div class="health-detail-body">
                  <div id="health-systemd-summary" class="health-systemd-summary"></div>
                  <div id="health-systemd-failed" class="hidden">
                    <div class="health-kv-label" style="margin-top: 10px;" data-i18n="health.failedUnits">Failed Units</div>
                    <div id="health-systemd-failed-list" class="health-failed-list"></div>
                  </div>
                </div>
              </div>

              <!-- Listening Ports -->
              <div class="health-detail-card" id="health-ports-card">
                <div class="health-detail-header" data-i18n="health.ports">Listening Ports</div>
                <div class="health-detail-body">
                  <table class="health-table" id="health-ports-table">
                    <thead>
                      <tr>
                        <th data-i18n="health.proto">Proto</th>
                        <th data-i18n="health.address">Address</th>
                        <th data-i18n="health.portProcess">Process</th>
                      </tr>
                    </thead>
                    <tbody id="health-ports-body"></tbody>
                  </table>
                  <div id="health-ports-empty" class="health-table-empty hidden" data-i18n="health.noPorts">No listening ports.</div>
                </div>
              </div>

              <!-- System Info -->
              <div class="health-detail-card">
                <div class="health-detail-header" data-i18n="health.systemInfo">System Info</div>
                <div class="health-detail-body">
                  <div class="health-kv-row">
                    <span class="health-kv-label" data-i18n="health.packages">Installed Packages</span>
                    <span class="health-kv-value mono" id="health-packages">--</span>
                  </div>
                  <div class="health-kv-row">
                    <span class="health-kv-label" data-i18n="health.gpu">GPU</span>
                    <span class="health-kv-value" id="health-gpu">--</span>
                  </div>
                  <div class="health-kv-row">
                    <span class="health-kv-label" data-i18n="health.interop">WSL Interop</span>
                    <span class="health-kv-value" id="health-interop">--</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Loading state -->
            <div id="health-loading" class="health-loading hidden">
              <div class="spinner"></div>
              <p data-i18n="health.loading">Collecting system metrics...</p>
            </div>

            <!-- Empty state -->
            <div id="health-empty" class="health-empty">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12"/>
              </svg>
              <p data-i18n="health.empty">Select a distro to view health metrics.</p>
            </div>

            <!-- Error state -->
            <div id="health-error" class="health-error hidden">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--danger)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
              </svg>
              <p id="health-error-msg" data-i18n="health.error">Could not retrieve health data. Make sure the distro is running.</p>
            </div>
          </div>

          <!-- ════ Performance Page ════ -->
          <div id="page-performance" class="page hidden">
            <!-- Toolbar -->
            <div class="health-toolbar">
              <div class="health-toolbar-left">
                <label class="health-label" data-i18n="performance.distro">Distro</label>
                <select id="perf-distro" class="health-select"></select>
              </div>
              <div class="health-toolbar-right">
                <div class="perf-tabs">
                  <button id="perf-tab-benchmark" class="perf-tab active" data-i18n="performance.benchmarkTab">Boot Time</button>
                  <button id="perf-tab-profiler" class="perf-tab" data-i18n="performance.profilerTab">Shell Startup</button>
                </div>
              </div>
            </div>

            <!-- ── Benchmark Panel ── -->
            <div id="perf-panel-benchmark" class="perf-panel">
              <!-- Action bar (always visible) -->
              <div class="perf-action-bar">
                <button id="btn-run-benchmark" class="btn-outline">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5,3 19,12 5,21"/>
                  </svg>
                  <span data-i18n="performance.analyzeBenchmark">Analyze Startup Time</span>
                </button>
                <div class="perf-action-spacer"></div>
                <label class="perf-checkbox-label">
                  <input type="checkbox" id="perf-bench-all-distros" />
                  <span data-i18n="performance.benchmarkAllDistros">Benchmark all distros</span>
                </label>
              </div>

              <div id="perf-bench-content" class="hidden">
                <!-- Results card -->
                <div id="perf-bench-results" class="health-detail-card hidden">
                  <div class="health-detail-header" data-i18n="performance.benchmarkResults">Startup Time Results</div>
                  <div class="health-detail-body">
                    <div id="perf-bench-list"></div>
                  </div>
                </div>

                <!-- History chart -->
                <div id="perf-bench-history" class="health-detail-card hidden">
                  <div class="health-detail-header" data-i18n="performance.benchmarkHistory">Benchmark History</div>
                  <div class="health-detail-body">
                    <canvas id="perf-bench-chart" height="250"></canvas>
                  </div>
                </div>

                <!-- Suggestions card -->
                <div id="perf-bench-suggest" class="health-detail-card hidden">
                  <div class="health-detail-header" data-i18n="performance.suggestions">Optimization Suggestions</div>
                  <div class="health-detail-body">
                    <div id="perf-bench-suggest-list"></div>
                  </div>
                </div>
              </div>

              <div id="perf-bench-loading" class="health-loading hidden">
                <div class="spinner"></div>
                <p data-i18n="performance.benchmarkRunning">Running startup benchmark&hellip;</p>
              </div>

              <div id="perf-bench-empty" class="health-empty">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-dim)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity:.4">
                  <circle cx="12" cy="14" r="9"/><path d="M12 5v4"/><path d="M16.24 8.76l-2.12 2.12"/><circle cx="12" cy="14" r="1.5"/>
                </svg>
                <p data-i18n="performance.benchmarkEmpty">Click &ldquo;Analyze Startup Time&rdquo; to benchmark how fast your WSL distros boot.</p>
              </div>

              <div id="perf-bench-error" class="health-error hidden">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
                </svg>
                <p id="perf-bench-error-msg" data-i18n="performance.benchmarkError">Could not run benchmark.</p>
              </div>
            </div>

            <!-- ── Profiler Panel ── -->
            <div id="perf-panel-profiler" class="perf-panel hidden">
              <!-- Action bar (always visible) -->
              <div class="perf-action-bar">
                <button id="btn-run-profiler" class="btn-outline">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="5,3 19,12 5,21"/>
                  </svg>
                  <span data-i18n="performance.analyzeShell">Analyze Shell Startup</span>
                </button>
              </div>

              <div id="perf-prof-content" class="hidden">
                <!-- Shell info banner -->
                <div id="perf-prof-shell-info" class="health-info-banner hidden">
                  <span id="perf-prof-shell-name">--</span>
                </div>

                <!-- Timing summary -->
                <div id="perf-prof-timing" class="perf-timing-summary hidden">
                  <div class="perf-timing-card">
                    <div class="perf-timing-label" data-i18n="performance.totalTime">Total</div>
                    <div class="perf-timing-value" id="perf-prof-total">--</div>
                  </div>
                  <div class="perf-timing-card">
                    <div class="perf-timing-label" data-i18n="performance.baselineTime">Baseline</div>
                    <div class="perf-timing-value" id="perf-prof-baseline">--</div>
                  </div>
                  <div class="perf-timing-card perf-timing-highlight">
                    <div class="perf-timing-label" data-i18n="performance.rcOverhead">RC Overhead</div>
                    <div class="perf-timing-value" id="perf-prof-overhead">--</div>
                  </div>
                </div>

                <!-- Slow items card -->
                <div id="perf-prof-items" class="health-detail-card hidden">
                  <div class="health-detail-header" data-i18n="performance.slowItems">Slow Items Detected</div>
                  <div class="health-detail-body">
                    <div id="perf-prof-items-list"></div>
                  </div>
                </div>

                <!-- Files analyzed card -->
                <div id="perf-prof-files" class="health-detail-card hidden">
                  <div class="health-detail-header" data-i18n="performance.filesAnalyzed">Configuration Files</div>
                  <div class="health-detail-body">
                    <div id="perf-prof-files-list"></div>
                  </div>
                </div>
              </div>

              <div id="perf-prof-loading" class="health-loading hidden">
                <div class="spinner"></div>
                <p data-i18n="performance.profilerRunning">Profiling shell startup&hellip;</p>
              </div>

              <div id="perf-prof-empty" class="health-empty">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-dim)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity:.4">
                  <path d="M4 17l6-6-6-6"/><path d="M12 19h8"/>
                </svg>
                <p data-i18n="performance.profilerEmpty">Click &ldquo;Analyze Shell Startup&rdquo; to profile your shell configuration and find bottlenecks.</p>
              </div>

              <div id="perf-prof-error" class="health-error hidden">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
                </svg>
                <p id="perf-prof-error-msg" data-i18n="performance.profilerError">Could not profile shell startup.</p>
              </div>
            </div>
          </div>

          <!-- ════ Config Editor Page ════ -->
          <div id="page-config" class="page hidden">
            <div class="config-toolbar">
              <div class="config-toolbar-left">
                <h2 class="section-title" style="margin:0" data-i18n="config.title">WSL Config Editor</h2>
              </div>
              <div class="config-toolbar-right">
                <div class="config-tabs">
                  <button class="config-tab active" data-tab="wslconfig" data-i18n="config.tabWslconfig">.wslconfig</button>
                  <button class="config-tab" data-tab="wslconf" data-i18n="config.tabWslconf">wsl.conf</button>
                </div>
              </div>
            </div>

            <!-- Restart banner -->
            <div id="config-restart-banner" class="config-restart-banner hidden">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              <span data-i18n="config.restartNeeded">Changes require a WSL restart to take effect.</span>
              <button id="config-restart-btn" class="btn-outline btn-sm" data-i18n="config.restartNow">Restart WSL</button>
            </div>

            <!-- .wslconfig panel -->
            <div id="config-wslconfig-panel" class="config-panel">
              <div class="config-info-bar" id="config-wslconfig-desc" data-i18n-html="config.wslconfigDesc">
                Global settings that apply to all WSL 2 distros.
              </div>

              <div class="config-section">
                <div class="config-section-header">[wsl2]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.memory">Memory Limit</label>
                    <span class="config-field-desc" data-i18n="config.field.memory.desc">Maximum RAM allocated to WSL 2</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-wsl2-memory" class="config-input" placeholder="4GB" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.processors">Processors</label>
                    <span class="config-field-desc" data-i18n="config.field.processors.desc">Number of logical CPU cores</span>
                  </div>
                  <div class="config-field-control">
                    <input type="number" id="cfg-wsl2-processors" class="config-input config-input-sm" min="1" placeholder="4" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.swap">Swap Size</label>
                    <span class="config-field-desc" data-i18n="config.field.swap.desc">Swap space size or 0 to disable</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-wsl2-swap" class="config-input" placeholder="2GB" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.swapFile">Swap File Path</label>
                    <span class="config-field-desc" data-i18n="config.field.swapFile.desc">Custom Windows path for the swap file</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-wsl2-swapFile" class="config-input config-input-wide" placeholder="" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.kernelCommandLine">Kernel Command Line</label>
                    <span class="config-field-desc" data-i18n="config.field.kernelCommandLine.desc">Extra kernel boot parameters</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-wsl2-kernelCommandLine" class="config-input config-input-wide" placeholder="" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.localhostForwarding">Localhost Forwarding</label>
                    <span class="config-field-desc" data-i18n="config.field.localhostForwarding.desc">Forward WSL ports to the host</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-localhostForwarding" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.networkingMode">Networking Mode</label>
                    <span class="config-field-desc" data-i18n="config.field.networkingMode.desc">NAT or Mirrored networking</span>
                  </div>
                  <div class="config-field-control">
                    <select id="cfg-wsl2-networkingMode" class="config-select">
                      <option value="">—</option>
                      <option value="nat">NAT</option>
                      <option value="mirrored">Mirrored</option>
                    </select>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.dnsTunneling">DNS Tunneling</label>
                    <span class="config-field-desc" data-i18n="config.field.dnsTunneling.desc">Better VPN compatibility</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-dnsTunneling" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.dnsProxy">DNS Proxy</label>
                    <span class="config-field-desc" data-i18n="config.field.dnsProxy.desc">Proxy DNS through Windows</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-dnsProxy" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.autoProxy">Auto Proxy</label>
                    <span class="config-field-desc" data-i18n="config.field.autoProxy.desc">Inherit host proxy settings</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-autoProxy" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.firewall">Firewall</label>
                    <span class="config-field-desc" data-i18n="config.field.firewall.desc">Apply Windows Firewall rules</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-firewall" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.autoMemoryReclaim">Auto Memory Reclaim</label>
                    <span class="config-field-desc" data-i18n="config.field.autoMemoryReclaim.desc">Return unused memory to host</span>
                  </div>
                  <div class="config-field-control">
                    <select id="cfg-wsl2-autoMemoryReclaim" class="config-select">
                      <option value="">—</option>
                      <option value="disabled">Disabled</option>
                      <option value="gradual">Gradual</option>
                      <option value="dropcache">Drop Cache</option>
                    </select>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.sparseVhd">Sparse VHD</label>
                    <span class="config-field-desc" data-i18n="config.field.sparseVhd.desc">Save disk space automatically</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-sparseVhd" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.pageReporting">Page Reporting</label>
                    <span class="config-field-desc" data-i18n="config.field.pageReporting.desc">Report unused memory pages</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-pageReporting" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.nestedVirtualization">Nested Virtualization</label>
                    <span class="config-field-desc" data-i18n="config.field.nestedVirtualization.desc">VMs inside WSL 2</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-nestedVirtualization" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.vmIdleTimeout">VM Idle Timeout</label>
                    <span class="config-field-desc" data-i18n="config.field.vmIdleTimeout.desc">Milliseconds before VM shuts down</span>
                  </div>
                  <div class="config-field-control">
                    <input type="number" id="cfg-wsl2-vmIdleTimeout" class="config-input config-input-sm" min="0" placeholder="" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.guiApplications">GUI Applications</label>
                    <span class="config-field-desc" data-i18n="config.field.guiApplications.desc">Enable WSLg</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-guiApplications" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.debugConsole">Debug Console</label>
                    <span class="config-field-desc" data-i18n="config.field.debugConsole.desc">Show debug console on start</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-wsl2-debugConsole" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>
              </div>

              <div class="config-actions">
                <button id="config-wslconfig-optimize" class="btn-outline config-action-btn" data-i18n="config.optimize">Optimize</button>
                <button id="config-wslconfig-reset" class="btn-outline config-action-btn" data-i18n="config.reset">Reset</button>
                <button id="config-wslconfig-save" class="btn-primary config-action-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17,21 17,13 7,13 7,21"/><polyline points="7,3 7,8 15,8"/>
                  </svg>
                  <span data-i18n="config.save">Save</span>
                </button>
              </div>
            </div>

            <!-- wsl.conf panel -->
            <div id="config-wslconf-panel" class="config-panel hidden">
              <div class="config-info-bar" data-i18n-html="config.wslconfDesc">
                Per-distro settings. Located at /etc/wsl.conf inside the selected distro.
              </div>

              <div class="config-distro-bar">
                <label class="config-distro-label" data-i18n="config.distro">Distro</label>
                <select id="config-distro-select" class="health-select"></select>
              </div>

              <!-- automount -->
              <div class="config-section">
                <div class="config-section-header">[automount]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.automount.enabled">Auto-mount Drives</label>
                    <span class="config-field-desc" data-i18n="config.field.automount.enabled.desc">Mount Windows drives under /mnt/</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-automount-enabled" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.automount.root">Mount Root</label>
                    <span class="config-field-desc" data-i18n="config.field.automount.root.desc">Root path for Windows drives</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-automount-root" class="config-input" placeholder="/mnt/" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.automount.options">Mount Options</label>
                    <span class="config-field-desc" data-i18n="config.field.automount.options.desc">DrvFs mount options</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-automount-options" class="config-input config-input-wide" placeholder="metadata,umask=22" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.automount.mountFsTab">Mount fstab</label>
                    <span class="config-field-desc" data-i18n="config.field.automount.mountFsTab.desc">Process /etc/fstab on startup</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-automount-mountFsTab" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>
              </div>

              <!-- interop -->
              <div class="config-section">
                <div class="config-section-header">[interop]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.interop.enabled">Windows Interop</label>
                    <span class="config-field-desc" data-i18n="config.field.interop.enabled.desc">Run Windows executables from WSL</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-interop-enabled" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.interop.appendWindowsPath">Append Windows PATH</label>
                    <span class="config-field-desc" data-i18n="config.field.interop.appendWindowsPath.desc">Add Windows PATH to WSL PATH</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-interop-appendWindowsPath" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>
              </div>

              <!-- user -->
              <div class="config-section">
                <div class="config-section-header">[user]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.user.default">Default User</label>
                    <span class="config-field-desc" data-i18n="config.field.user.default.desc">Username on distro start</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-user-default" class="config-input" placeholder="" />
                  </div>
                </div>
              </div>

              <!-- boot -->
              <div class="config-section">
                <div class="config-section-header">[boot]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.boot.systemd">Systemd</label>
                    <span class="config-field-desc" data-i18n="config.field.boot.systemd.desc">Run systemd as PID 1</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-boot-systemd" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.boot.command">Boot Command</label>
                    <span class="config-field-desc" data-i18n="config.field.boot.command.desc">Command on distro startup</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-boot-command" class="config-input config-input-wide" placeholder="" />
                  </div>
                </div>
              </div>

              <!-- network -->
              <div class="config-section">
                <div class="config-section-header">[network]</div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.network.hostname">Hostname</label>
                    <span class="config-field-desc" data-i18n="config.field.network.hostname.desc">Custom hostname</span>
                  </div>
                  <div class="config-field-control">
                    <input type="text" id="cfg-network-hostname" class="config-input" placeholder="" />
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.network.generateHosts">Generate /etc/hosts</label>
                    <span class="config-field-desc" data-i18n="config.field.network.generateHosts.desc">Auto-generate on startup</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-network-generateHosts" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>

                <div class="config-field">
                  <div class="config-field-info">
                    <label class="config-field-label" data-i18n="config.field.network.generateResolvConf">Generate resolv.conf</label>
                    <span class="config-field-desc" data-i18n="config.field.network.generateResolvConf.desc">Auto-generate on startup</span>
                  </div>
                  <div class="config-field-control">
                    <label class="config-toggle"><input type="checkbox" id="cfg-network-generateResolvConf" /><span class="config-toggle-slider"></span></label>
                  </div>
                </div>
              </div>

              <div class="config-actions">
                <button id="config-wslconf-optimize" class="btn-outline config-action-btn" data-i18n="config.optimize">Optimize</button>
                <button id="config-wslconf-reset" class="btn-outline config-action-btn" data-i18n="config.reset">Reset</button>
                <button id="config-wslconf-save" class="btn-primary config-action-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17,21 17,13 7,13 7,21"/><polyline points="7,3 7,8 15,8"/>
                  </svg>
                  <span data-i18n="config.save">Save</span>
                </button>
              </div>
            </div>

            <!-- Loading state -->
            <div id="config-loading" class="health-loading hidden">
              <div class="spinner"></div>
              <p data-i18n="config.loading">Loading configuration...</p>
            </div>
          </div>

          <!-- ════ Distros Page ════ -->
          <div id="page-distros" class="page hidden">
            <div class="distros-toolbar">
              <div class="distros-toolbar-left">
                <h2 class="section-title" style="margin:0" data-i18n="distros.title">Distro Manager</h2>
              </div>
              <div class="distros-toolbar-right">
                <button id="btn-distros-refresh" class="btn-outline btn-health-refresh">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                  </svg>
                  <span data-i18n="distros.refresh">Refresh</span>
                </button>
              </div>
            </div>
            <p class="section-desc" data-i18n="distros.desc">Export, import, clone, and restart your WSL distributions. Compare size, packages, and uptime across all distros at a glance.</p>

            <!-- Comparison table -->
            <div id="distros-table-container"></div>

            <!-- Loading state -->
            <div id="distros-loading" class="health-loading hidden">
              <div class="spinner"></div>
              <p data-i18n="distros.loading">Loading distro information...</p>
            </div>

            <!-- Empty state -->
            <div id="distros-empty" class="health-empty hidden">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><circle cx="6" cy="6" r="1"/><circle cx="6" cy="18" r="1"/>
              </svg>
              <p data-i18n="distros.noDistros">No WSL 2 distros found.</p>
            </div>

            <!-- Import section -->
            <div class="card distros-import-card" id="distros-import-section">
              <div class="card-body">
                <h3 data-i18n="distros.importTitle">Import Distro</h3>
                <div class="distros-import-row">
                  <div class="distros-import-field">
                    <label data-i18n="distros.importName">Distro Name</label>
                    <input type="text" id="distros-import-name" class="distros-input" placeholder="MyDistro" data-i18n-placeholder="distros.importNamePlaceholder" autocomplete="off" />
                  </div>
                  <div class="distros-import-field">
                    <label data-i18n="distros.importLocation">Install Location</label>
                    <div class="distros-import-path-row">
                      <input type="text" id="distros-import-location" class="distros-input distros-input-wide" placeholder="C:\WSL\MyDistro" data-i18n-placeholder="distros.importLocationPlaceholder" autocomplete="off" />
                      <button id="distros-import-browse-location" class="btn-outline btn-sm" data-i18n="distros.browse">Browse</button>
                    </div>
                  </div>
                  <div class="distros-import-field">
                    <label data-i18n="distros.importFile">.tar Archive</label>
                    <div class="distros-import-path-row">
                      <input type="text" id="distros-import-tar" class="distros-input distros-input-wide" placeholder="backup.tar" readonly />
                      <button id="distros-import-browse-tar" class="btn-outline btn-sm" data-i18n="distros.browseTar">Browse</button>
                    </div>
                  </div>
                </div>
                <button id="distros-import-btn" class="btn-primary btn-sm" style="margin-top:12px;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/>
                  </svg>
                  <span data-i18n="distros.importBtn">Import</span>
                </button>
              </div>
            </div>

            <!-- Activity log -->
            <div class="card distros-log-card" id="distros-log-section">
              <div class="card-body">
                <div class="distros-log-header">
                  <h3 data-i18n="distros.logTitle">Activity Log</h3>
                  <button id="distros-log-clear" class="btn-small" data-i18n="log.clear">Clear</button>
                </div>
                <pre id="distros-log" class="distros-log"></pre>
              </div>
            </div>
          </div>

          <!-- ════ Startup Manager Page ════ -->
          <div id="page-startup" class="page hidden">
            <h2 class="section-title" data-i18n="startup.title">Startup Manager</h2>
            <p class="section-desc" data-i18n="startup.desc">View and manage auto-starting services in your WSL distros.</p>

            <!-- Toolbar -->
            <div class="health-toolbar">
              <div class="health-toolbar-left">
                <label class="health-label" data-i18n="startup.distro">Distro</label>
                <select id="startup-distro" class="health-select"></select>
              </div>
              <div class="health-toolbar-right">
                <button id="btn-startup-refresh" class="btn-outline btn-health-refresh">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                  </svg>
                  <span data-i18n="startup.refresh">Refresh</span>
                </button>
              </div>
            </div>

            <!-- Content area -->
            <div id="startup-content" class="hidden">
              <!-- Init system banner -->
              <div id="startup-init-banner" class="startup-init-banner">
                <span id="startup-init-name">--</span>
              </div>

              <!-- Search & filter controls -->
              <div class="startup-filters">
                <div class="task-search-wrap">
                  <svg class="task-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
                  </svg>
                  <input type="text" id="startup-search" class="task-search"
                         data-i18n-placeholder="startup.searchPlaceholder"
                         placeholder="Search services..." autocomplete="off" />
                </div>
                <div class="startup-state-filters">
                  <button class="startup-filter-btn active" data-filter="all" data-i18n="startup.filterAll">All</button>
                  <button class="startup-filter-btn" data-filter="enabled" data-i18n="startup.filterEnabled">Enabled</button>
                  <button class="startup-filter-btn" data-filter="disabled" data-i18n="startup.filterDisabled">Disabled</button>
                  <button class="startup-filter-btn" data-filter="static" data-i18n="startup.filterStatic">Static</button>
                  <button class="startup-filter-btn" data-filter="masked" data-i18n="startup.filterMasked">Masked</button>
                </div>
              </div>

              <!-- Service count summary -->
              <div id="startup-summary" class="startup-summary"></div>

              <!-- Services list -->
              <div id="startup-services-list" class="startup-services-list"></div>

              <!-- rc.local section -->
              <div id="startup-rclocal" class="health-detail-card hidden" style="margin-top: 20px;">
                <div class="health-detail-header" data-i18n="startup.rclocal">rc.local</div>
                <div class="health-detail-body">
                  <pre id="startup-rclocal-content" class="startup-rclocal-pre"></pre>
                </div>
              </div>
            </div>

            <!-- Non-systemd notice -->
            <div id="startup-no-systemd" class="health-empty hidden">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
              </svg>
              <p data-i18n="startup.noSystemd">This distro does not use systemd. Startup management requires systemd to be enabled.</p>
              <p class="startup-hint" data-i18n-html="startup.enableSystemdHint">Add <code>[boot]<br>systemd=true</code> to <code>/etc/wsl.conf</code> and restart the distro.</p>
            </div>

            <!-- Loading state -->
            <div id="startup-loading" class="health-loading hidden">
              <div class="spinner"></div>
              <p data-i18n="startup.loading">Loading startup services...</p>
            </div>

            <!-- Empty state -->
            <div id="startup-empty" class="health-empty">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--text-muted)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" y1="2" x2="12" y2="12"/>
              </svg>
              <p data-i18n="startup.empty">Select a distro to manage startup services.</p>
            </div>

            <!-- Error state -->
            <div id="startup-error" class="health-error hidden">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--danger)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
              </svg>
              <p id="startup-error-msg" data-i18n="startup.error">Could not retrieve startup services. Make sure the distro is running.</p>
            </div>
          </div>

          <!-- ════ Tray & Alerts Page ════ -->
          <div id="page-tray" class="page hidden">
            <!-- System Tray Section -->
            <h2 class="section-title" data-i18n="tray.title">System Tray</h2>
            <p class="section-desc" data-i18n="tray.desc">Minimize WSL Cleaner to the system tray for background monitoring with live stats.</p>

            <div class="stale-controls">
              <div class="stale-toggle-row">
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="tray-enabled-cb" />
                  <span class="toggle-slider"></span>
                </label>
                <span class="stale-toggle-label" data-i18n="tray.enableToggle">Enable system tray mode</span>
              </div>
              <div class="stale-toggle-row">
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="tray-close-to-tray-cb" />
                  <span class="toggle-slider"></span>
                </label>
                <span class="stale-toggle-label" data-i18n="tray.closeToTray">Minimize to tray on close</span>
              </div>
            </div>

            <div class="stale-controls" style="margin-top: 12px;">
              <div class="stale-days-row">
                <label for="tray-interval-input" data-i18n="tray.intervalLabel">Update stats every</label>
                <input type="number" id="tray-interval-input" class="stale-days-input" value="60" min="10" max="600" />
                <span data-i18n="tray.intervalUnit">seconds</span>
              </div>
              <div class="stale-days-row">
                <label for="tray-distro-select" data-i18n="tray.monitorDistro">Monitor distro</label>
                <select id="tray-distro-select" class="health-select"></select>
              </div>
            </div>

            <!-- Live preview of tray tooltip -->
            <div class="tray-preview-card" style="margin-top: 16px;">
              <div class="health-detail-header" data-i18n="tray.preview">Tray Preview</div>
              <div id="tray-preview-tooltip" class="mono" style="color: var(--text-muted); padding: 8px 0; font-size: 0.85rem;">--</div>
            </div>

            <!-- Smart Alerts Section -->
            <h2 class="section-title" style="margin-top: 32px;" data-i18n="alerts.title">Smart Alerts</h2>
            <p class="section-desc" data-i18n="alerts.desc">Get notified when your WSL environment needs attention.</p>

            <div class="stale-controls">
              <div class="stale-toggle-row">
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="alerts-enabled-cb" />
                  <span class="toggle-slider"></span>
                </label>
                <span class="stale-toggle-label" data-i18n="alerts.masterToggle">Enable notifications</span>
              </div>
            </div>

            <!-- Alert type cards rendered by JS -->
            <div id="alert-cards" class="alert-cards"></div>

            <!-- Cooldown setting -->
            <div class="stale-controls" style="margin-top: 16px;">
              <div class="stale-days-row">
                <label for="alert-cooldown-input" data-i18n="alerts.cooldownLabel">Minimum time between repeat alerts</label>
                <input type="number" id="alert-cooldown-input" class="stale-days-input" value="30" min="5" max="1440" />
                <span data-i18n="alerts.cooldownUnit">minutes</span>
              </div>
            </div>
          </div>

          <!-- ════ About Page ════ -->
          <div id="page-about" class="page hidden">
            <div class="about-center">
              <div class="about-logo">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/>
                </svg>
              </div>
              <h2 class="about-title" data-i18n="app.title">WSL Cleaner</h2>
              <span id="about-version" class="badge">v1.0.0</span>
              <p class="about-desc" data-i18n="about.desc">A lightweight utility to clean, optimize, and compact your Windows Subsystem for Linux installation. Reclaim disk space with one click.</p>

              <!-- Update status area -->
              <div id="update-status" class="update-status hidden"></div>

              <div class="about-links">
                <button id="btn-check-updates" class="btn-primary">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="1,4 1,10 7,10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                  </svg>
                  <span data-i18n="about.checkUpdates">Check for Updates</span>
                </button>
                <button id="btn-install-update" class="btn-primary btn-success hidden">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/>
                  </svg>
                  <span data-i18n-html="about.installRestart">Install &amp; Restart</span>
                </button>
                <button id="btn-github" class="btn-outline">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
                  </svg>
                  <span data-i18n="about.viewGithub">View on GitHub</span>
                </button>
              </div>

              <!-- Language selector -->
              <div class="language-selector">
                <label data-i18n="language.label">Language</label>
                <select id="locale-select"></select>
              </div>

              <!-- Sound toggle -->
              <div class="sound-toggle">
                <label data-i18n="sound.label">Sound Effects</label>
                <label class="toggle" onclick="event.stopPropagation()">
                  <input type="checkbox" id="sound-enabled-cb" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>

              <div class="about-footer">
                <p data-i18n="about.footer">Made for the WSL community</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Aggressive task confirmation modal -->
  <div id="aggressive-modal" class="modal-overlay hidden">
    <div class="modal-card">
      <div class="modal-header">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
        <h3 data-i18n="modal.aggressiveTitle">Aggressive Tasks Enabled</h3>
      </div>
      <p class="modal-desc" data-i18n-html="modal.aggressiveDesc">The following tasks will <strong>permanently destroy data</strong> that may be difficult or impossible to restore:</p>
      <div id="aggressive-modal-list" class="modal-task-list"></div>
      <p class="modal-hint" data-i18n-html="modal.aggressiveHint">These tasks are marked <span class="chip-aggressive" style="display:inline-block;vertical-align:middle;">aggressive</span> because they remove data beyond typical caches. Make sure you understand the consequences before proceeding.</p>
      <div class="modal-actions">
        <button id="aggressive-modal-cancel" class="btn-outline modal-btn" data-i18n="modal.cancel">Cancel</button>
        <button id="aggressive-modal-proceed" class="btn-primary btn-danger modal-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polygon points="5,3 19,12 5,21"/></svg>
          <span data-i18n="modal.proceed">Proceed Anyway</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Failed tasks log modal -->
  <div id="fail-log-modal" class="modal-overlay hidden">
    <div class="modal-card modal-card-wide">
      <div class="modal-header">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/>
        </svg>
        <h3 class="modal-header-danger">Failed Tasks</h3>
      </div>
      <div id="fail-log-list" class="fail-log-list"></div>
      <div class="modal-actions">
        <button id="fail-log-close" class="btn-outline modal-btn">Close</button>
      </div>
    </div>
  </div>

  <!-- Clone distro modal -->
  <div id="clone-modal" class="modal-overlay hidden">
    <div class="modal-card">
      <div class="modal-header">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
        </svg>
        <h3 data-i18n="distros.cloneTitle">Clone Distro</h3>
      </div>
      <p class="modal-desc" id="clone-modal-desc"></p>
      <div class="distros-import-field" style="margin-top:12px;">
        <label data-i18n="distros.cloneNameLabel">New Distro Name</label>
        <input type="text" id="clone-modal-name" class="distros-input" placeholder="Ubuntu-Clone" data-i18n-placeholder="distros.cloneNamePlaceholder" autocomplete="off" />
      </div>
      <div class="distros-import-field" style="margin-top:8px;">
        <label data-i18n="distros.cloneLocationLabel">Install Location</label>
        <div class="distros-import-path-row">
          <input type="text" id="clone-modal-location" class="distros-input distros-input-wide" placeholder="C:\WSL\Ubuntu-Clone" data-i18n-placeholder="distros.cloneLocationPlaceholder" autocomplete="off" />
          <button id="clone-modal-browse" class="btn-outline btn-sm" data-i18n="distros.browse">Browse</button>
        </div>
      </div>
      <div class="modal-actions">
        <button id="clone-modal-cancel" class="btn-outline modal-btn" data-i18n="modal.cancel">Cancel</button>
        <button id="clone-modal-confirm" class="btn-primary modal-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
          </svg>
          <span data-i18n="distros.cloneBtn">Clone</span>
        </button>
      </div>
    </div>
  </div>

  <!-- ── Migration Wizard Modal ─────────────────────────────────────────── -->
  <div id="migrate-modal" class="modal-overlay hidden">
    <div class="modal-card migrate-modal-card">
      <div class="modal-header">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
          <line x1="12" y1="11" x2="12" y2="17"/><polyline points="9,14 12,17 15,14"/>
        </svg>
        <h3 data-i18n="migrate.title">Migrate Distro</h3>
        <button id="migrate-modal-close" class="modal-close-btn" type="button" aria-label="Close">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>

      <!-- Stepper bar -->
      <div class="migrate-stepper">
        <div class="migrate-stepper-step active" data-wizard-step="1">
          <div class="migrate-stepper-number">1</div>
          <span data-i18n="migrate.stepper.destination">Destination</span>
        </div>
        <div class="migrate-stepper-line"></div>
        <div class="migrate-stepper-step" data-wizard-step="2">
          <div class="migrate-stepper-number">2</div>
          <span data-i18n="migrate.stepper.confirm">Confirm</span>
        </div>
        <div class="migrate-stepper-line"></div>
        <div class="migrate-stepper-step" data-wizard-step="3">
          <div class="migrate-stepper-number">3</div>
          <span data-i18n="migrate.stepper.migrate">Migrate</span>
        </div>
        <div class="migrate-stepper-line"></div>
        <div class="migrate-stepper-step" data-wizard-step="4">
          <div class="migrate-stepper-number">4</div>
          <span data-i18n="migrate.stepper.done">Done</span>
        </div>
      </div>

      <!-- Step 1: Destination -->
      <div class="migrate-panel" id="migrate-step-1">
        <!-- Distro info banner -->
        <div class="migrate-distro-info">
          <div class="migrate-distro-info-row">
            <span data-i18n="migrate.info.distro">Distribution:</span>
            <span id="migrate-info-distro" class="mono">--</span>
          </div>
          <div class="migrate-distro-info-row">
            <span data-i18n="migrate.info.currentPath">Current location:</span>
            <span id="migrate-info-path" class="mono">--</span>
          </div>
          <div class="migrate-distro-info-row">
            <span data-i18n="migrate.info.vhdxSize">VHDX size:</span>
            <span id="migrate-info-size" class="mono">--</span>
          </div>
        </div>

        <div class="migrate-field">
          <label data-i18n="migrate.dest.pathLabel">Destination Folder</label>
          <div class="distros-import-path-row">
            <input type="text" id="migrate-dest-path" class="distros-input distros-input-wide"
                   placeholder="D:\WSL\Ubuntu" data-i18n-placeholder="migrate.dest.pathPlaceholder"
                   autocomplete="off" />
            <button id="migrate-browse" class="btn-outline btn-sm" data-i18n="distros.browse">Browse</button>
          </div>
        </div>

        <div id="migrate-space-info" class="migrate-space-info hidden">
          <div class="migrate-space-row">
            <span data-i18n="migrate.dest.required">Space required (estimated):</span>
            <span id="migrate-space-required" class="mono">--</span>
          </div>
          <div class="migrate-space-row">
            <span data-i18n="migrate.dest.available">Available on target drive:</span>
            <span id="migrate-space-available" class="mono">--</span>
          </div>
        </div>
        <div id="migrate-space-warning" class="migrate-warning hidden">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span id="migrate-space-warning-text" data-i18n="migrate.dest.insufficientSpace">Not enough space on the target drive.</span>
        </div>

        <div class="migrate-nav">
          <div></div>
          <button class="btn-primary btn-sm" id="migrate-next-1" disabled data-i18n="migrate.next">Next</button>
        </div>
      </div>

      <!-- Step 2: Confirm -->
      <div class="migrate-panel hidden" id="migrate-step-2">
        <h3 class="migrate-panel-title" data-i18n="migrate.confirm.title">Confirm Migration</h3>

        <div class="migrate-summary">
          <div class="migrate-summary-row">
            <span class="migrate-summary-label" data-i18n="migrate.confirm.distro">Distribution:</span>
            <span class="migrate-summary-value" id="migrate-summary-distro">--</span>
          </div>
          <div class="migrate-summary-row">
            <span class="migrate-summary-label" data-i18n="migrate.confirm.currentLocation">Current location:</span>
            <span class="migrate-summary-value mono" id="migrate-summary-current">--</span>
          </div>
          <div class="migrate-summary-row">
            <span class="migrate-summary-label" data-i18n="migrate.confirm.newLocation">New location:</span>
            <span class="migrate-summary-value mono" id="migrate-summary-dest">--</span>
          </div>
          <div class="migrate-summary-row">
            <span class="migrate-summary-label" data-i18n="migrate.confirm.vhdxSize">VHDX size:</span>
            <span class="migrate-summary-value mono" id="migrate-summary-size">--</span>
          </div>
          <div class="migrate-summary-row">
            <span class="migrate-summary-label" data-i18n="migrate.confirm.defaultUser">Default user:</span>
            <span class="migrate-summary-value mono" id="migrate-summary-user">--</span>
          </div>
        </div>

        <div class="stale-toggle-row" style="margin-top: 16px;">
          <label class="toggle" onclick="event.stopPropagation()">
            <input type="checkbox" id="migrate-keep-backup" />
            <span class="toggle-slider"></span>
          </label>
          <span class="stale-toggle-label" data-i18n="migrate.confirm.keepBackup">Keep tar backup after migration</span>
        </div>

        <div class="migrate-warnings">
          <div class="migrate-warning-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            <span data-i18n="migrate.confirm.warning1">The distro will be temporarily unavailable during migration.</span>
          </div>
          <div class="migrate-warning-item">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            <span data-i18n="migrate.confirm.warning2">If anything goes wrong, the tar backup will be preserved for manual recovery.</span>
          </div>
        </div>

        <div class="migrate-nav">
          <button class="btn-outline btn-sm" id="migrate-back-2" data-i18n="migrate.back">Back</button>
          <button class="btn-primary btn-sm" id="migrate-start">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5,3 19,12 5,21"/></svg>
            <span data-i18n="migrate.confirm.startBtn">Start Migration</span>
          </button>
        </div>
      </div>

      <!-- Step 3: Progress -->
      <div class="migrate-panel hidden" id="migrate-step-3">
        <h3 class="migrate-panel-title" data-i18n="migrate.progress.title">Migration In Progress</h3>
        <p class="migrate-panel-desc" data-i18n="migrate.progress.desc">Please wait while the distro is being moved. Do not close the application.</p>

        <div class="simple-steps" id="migrate-steps">
          <div class="progress-header">
            <div class="orbital-spinner orbital-spinner-sm">
              <div class="orbit orbit-1"></div>
              <div class="orbit orbit-2"></div>
              <div class="orbit orbit-3"></div>
              <div class="orbit-core"></div>
            </div>
            <div class="progress-bar-track">
              <div id="migrate-progress-fill" class="progress-bar-fill" style="width:0%"></div>
            </div>
            <div class="progress-info">
              <span id="migrate-step-counter"></span>
              <span id="migrate-elapsed">0:00</span>
            </div>
          </div>

          <div class="step-item" data-step="export">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.export">Exporting distro to archive...</span>
          </div>
          <div class="step-item" data-step="terminate">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.terminate">Terminating distro...</span>
          </div>
          <div class="step-item" data-step="unregister">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.unregister">Unregistering from current location...</span>
          </div>
          <div class="step-item" data-step="import">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.import">Importing at new location...</span>
          </div>
          <div class="step-item" data-step="user">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.user">Restoring default user...</span>
          </div>
          <div class="step-item" data-step="verify">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.verify">Verifying migration...</span>
          </div>
          <div class="step-item" data-step="cleanup">
            <div class="step-icon-slot"></div>
            <span class="step-label" data-i18n="migrate.progress.cleanup">Cleaning up temporary files...</span>
          </div>
        </div>

        <div class="cleaner-log-section" id="migrate-log-section">
          <div class="cleaner-log-header">
            <span data-i18n="simple.logTitle">Live Output</span>
            <button id="migrate-log-toggle" class="btn-icon-sm" type="button" title="Toggle log">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6,9 12,15 18,9"/></svg>
            </button>
          </div>
          <pre id="migrate-log" class="cleaner-log"></pre>
        </div>
      </div>

      <!-- Step 4: Completion -->
      <div class="migrate-panel hidden" id="migrate-step-4">
        <div id="migrate-result-success" class="hidden">
          <div class="result-success-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <h2 class="result-title" data-i18n="migrate.result.successTitle">Migration Complete</h2>
          <p class="migrate-result-desc" data-i18n="migrate.result.successDesc">Your distribution has been successfully moved to the new location.</p>
          <div class="migrate-summary" id="migrate-result-summary"></div>
          <div id="migrate-result-backup" class="migrate-info hidden">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <span id="migrate-result-backup-path"></span>
          </div>
        </div>

        <div id="migrate-result-failure" class="hidden">
          <div class="result-success-icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--danger)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
          </div>
          <h2 class="result-title" style="color: var(--danger);" data-i18n="migrate.result.failTitle">Migration Failed</h2>
          <p class="migrate-result-desc" id="migrate-fail-message"></p>
          <div class="migrate-info" id="migrate-fail-tar-info" style="display:none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--warning)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <span id="migrate-fail-tar-path"></span>
          </div>
        </div>

        <div class="migrate-nav" style="margin-top: 24px;">
          <div></div>
          <button class="btn-primary btn-sm" id="migrate-reset">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
            </svg>
            <span data-i18n="migrate.result.startOver">Start Over</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="utils.js"></script>
  <script src="i18n.js"></script>
  <script src="tasks.js"></script>
  <script src="chart.umd.min.js"></script>
  <script src="treemap.js"></script>
  <script src="app.js"></script>
</body>
</html>
